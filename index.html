<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XL Smart - CleverTap Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        xl: {
                            blue: '#002664', // XL Dark Blue
                            light: '#00A4E4', // XL Light Blue
                            green: '#8CC63F', // XL Green accent
                        }
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom Scrollbar */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* Animations */
        @keyframes slideDown { from { transform: translateY(-100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
        @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; } }
        
        /* Updated Background and Body */
        body {
            margin: 0;
            background: radial-gradient(1200px 800px at 20% 20%, #141a2f 0%, #0b0f1e 45%, #070a14 100%);
            height: 100vh;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
            overflow: hidden;
        }

        /* Phone Frame - Updated with requested styles */
        .phone-container {
            position: relative;
            width: min(360px, 90vw);
            height: 750px;
            border-radius: 3rem;
            background: linear-gradient(145deg, #0d111d, #0a0d18);
            box-shadow:
                0 30px 80px #0008,
                inset 0 0 0 2px #1e2230,
                inset 0 0 0 6px #0c0f1a,
                inset 0 0 0 9px #1c2336;
            transition: transform 0.6s cubic-bezier(0.2, 0.8, 0.2, 1), box-shadow 0.6s;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .phone-container:hover {
            transform: translateY(-5px) scale(1.01);
            box-shadow:
                0 40px 100px #000c,
                inset 0 0 0 2px #252b3d,
                inset 0 0 0 6px #0c0f1a,
                inset 0 0 0 9px #1c2336;
        }

        /* Inner Screen logic to allow for the frame thickness */
        .inner-screen {
            position: absolute;
            inset: 10px; /* Aligns with the inset shadows */
            background: #f9fafb; /* gray-50 */
            border-radius: 2.5rem;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
    </style>
</head>
<body>

    <!-- Phone Container -->
    <div class="phone-container">
        
        <!-- Inner Screen UI -->
        <div class="inner-screen">
            
            <!-- Status Bar -->
            <div class="h-8 bg-xl-blue flex justify-between items-center px-6 text-xs font-medium z-20 select-none text-white">
                <span>9:41</span>
                <div class="flex gap-1.5">
                    <i class="fas fa-signal"></i>
                    <i class="fas fa-wifi"></i>
                    <i class="fas fa-battery-full"></i>
                </div>
            </div>

            <!-- Notch -->
            <div class="absolute top-0 left-1/2 -translate-x-1/2 w-32 h-6 bg-gray-900 rounded-b-xl z-30"></div>

            <!-- Simulated Push Notification -->
            <!-- UPDATED: Now redirects to rewards.html on click -->
            <div id="pushNotification" class="absolute top-2 left-2 right-2 bg-slate-900/95 backdrop-blur text-white p-3 rounded-2xl z-50 transform -translate-y-[150%] transition-transform duration-300 shadow-lg flex items-start gap-3 cursor-pointer" onclick="window.location.href='rewards.html'">
                <div class="w-8 h-8 rounded-full bg-xl-green flex items-center justify-center shrink-0 text-xl-blue">
                    <i class="fas fa-exclamation-triangle text-xs"></i>
                </div>
                <div class="flex-1">
                    <div class="flex justify-between items-baseline">
                        <h4 class="text-sm font-bold">Data Alert</h4>
                        <span class="text-[10px] text-gray-400">Now</span>
                    </div>
                    <p class="text-xs text-gray-200 mt-0.5">You have used 90% of your daily internet quota. Buy booster now!</p>
                </div>
            </div>

            <!-- Scrollable Screen Content -->
            <div id="screenContent" class="flex-1 overflow-y-auto no-scrollbar relative bg-gray-50 pb-20">
                
                <!-- PAGE 1: HOME FEED (TELCO DASHBOARD) -->
                <div id="pageHome" class="block">
                    
                    <!-- App Header -->
                    <div class="bg-xl-blue text-white pt-6 pb-12 px-5 rounded-b-[2.5rem] relative z-10">
                        <div class="flex justify-between items-center mb-6">
                            <div class="flex items-center gap-2">
                                <div class="w-8 h-8 bg-white rounded flex items-center justify-center">
                                    <span class="text-xl-blue font-bold text-xs tracking-tighter transform -skew-x-12">XL</span>
                                </div>
                                <div>
                                    <h1 class="text-sm font-bold opacity-90">Welcome back,</h1>
                                    <p class="text-lg font-bold leading-none">Budi Santoso</p>
                                </div>
                            </div>
                            <button class="relative p-2" onclick="switchPage('pageInbox')">
                                <i class="far fa-bell text-xl text-white"></i>
                                <span class="absolute top-1 right-1 w-2.5 h-2.5 bg-xl-green rounded-full border-2 border-xl-blue"></span>
                            </button>
                        </div>

                        <!-- Main Balance Card -->
                        <div class="bg-white text-gray-800 rounded-2xl p-5 shadow-lg relative -mb-16">
                            <div class="flex justify-between items-start mb-4 border-b border-gray-100 pb-4">
                                <div>
                                    <p class="text-xs text-gray-500 font-semibold uppercase tracking-wide">Main Balance</p>
                                    <h2 class="text-2xl font-bold text-xl-blue">Rp 45.200</h2>
                                    <p class="text-[10px] text-gray-400">Valid until 24 Oct 2025</p>
                                </div>
                                <button class="bg-xl-green text-white px-4 py-2 rounded-lg text-xs font-bold shadow-md hover:bg-green-600 transition">
                                    <i class="fas fa-plus-circle mr-1"></i> Top Up
                                </button>
                            </div>
                            <div class="flex justify-between text-center">
                                <div class="flex-1 border-r border-gray-100">
                                    <p class="text-xs text-gray-400">Internet</p>
                                    <p class="text-lg font-bold text-gray-800">12.5 <span class="text-xs">GB</span></p>
                                </div>
                                <div class="flex-1 border-r border-gray-100">
                                    <p class="text-xs text-gray-400">Calls</p>
                                    <p class="text-lg font-bold text-gray-800">45 <span class="text-xs">Min</span></p>
                                </div>
                                <div class="flex-1">
                                    <p class="text-xs text-gray-400">Points</p>
                                    <p class="text-lg font-bold text-gray-800">850</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Spacer for negative margin card -->
                    <div class="h-20"></div>

                    <!-- Content Area -->
                    <div class="px-4 pb-4 space-y-6">
                        
                        <!-- Quick Actions -->
                        <div class="grid grid-cols-4 gap-2 text-center">
                            
                            <!-- REWARDS BUTTON (REDIRECT) -->
                            <div onclick="window.location.href='rewards.html'" class="flex flex-col items-center gap-1 group cursor-pointer hover:opacity-80 transition">
                                <div class="w-12 h-12 rounded-xl bg-blue-50 text-xl-blue flex items-center justify-center shadow-sm group-hover:bg-blue-100 transition">
                                    <i class="fas fa-gift"></i>
                                </div>
                                <span class="text-[10px] font-medium text-xl-blue font-bold">Rewards</span>
                            </div>
                            
                            <!-- ROAMING BUTTON (TRIGGER INTERSTITIAL) -->
                            <div onclick="showInterstitial()" class="flex flex-col items-center gap-1 group cursor-pointer hover:opacity-80 transition">
                                <div class="w-12 h-12 rounded-xl bg-blue-50 text-xl-blue flex items-center justify-center shadow-sm group-hover:bg-blue-100 transition">
                                    <i class="fas fa-plane"></i> <!-- Plane Icon -->
                                </div>
                                <span class="text-[10px] font-medium text-gray-600 font-bold">Roaming</span>
                            </div>
                            
                            <!-- UPDATED: HISTORY BUTTON (TRIGGER PUSH) -->
                            <div onclick="showPushNotification()" class="flex flex-col items-center gap-1 group cursor-pointer hover:opacity-80 transition">
                                <div class="w-12 h-12 rounded-xl bg-blue-50 text-xl-blue flex items-center justify-center shadow-sm group-hover:bg-blue-100 transition">
                                    <i class="fas fa-history"></i>
                                </div>
                                <span class="text-[10px] font-medium text-gray-600 font-bold">History</span>
                            </div>
                            
                            <div onclick="window.location.href='theme.html'" class="flex flex-col items-center gap-1 group cursor-pointer">
                                <div class="w-12 h-12 rounded-xl bg-blue-50 text-xl-blue flex items-center justify-center shadow-sm group-hover:bg-blue-100 transition"><i class="fas fa-ellipsis-h"></i></div>
                                <span class="text-[10px] font-medium text-gray-600">More</span>
                            </div>
                        </div>

                        <!-- NATIVE DISPLAY DEMO AREA -->
                        <div id="nativeDisplayContainer" class="hidden transform transition-all duration-500">
                            <div class="bg-gradient-to-r from-xl-blue to-blue-800 rounded-2xl p-5 text-white shadow-xl relative overflow-hidden group cursor-pointer">
                                <div class="absolute -bottom-10 -right-10 w-40 h-40 bg-xl-green opacity-20 rounded-full blur-2xl"></div>
                                <div class="relative z-10">
                                    <div class="flex justify-between items-start mb-2">
                                        <span class="text-[10px] font-bold bg-white/20 px-2 py-0.5 rounded text-white tracking-wide">BUSINESS OFFER</span>
                                        <button onclick="toggleNativeDisplay()" class="text-white/60 hover:text-white"><i class="fas fa-times"></i></button>
                                    </div>
                                    <h3 class="text-lg font-bold mb-1">Upgrade to XL Business</h3>
                                    <p class="text-xs text-blue-100 mb-3 w-3/4">Get priority network access and dedicated support for your enterprise.</p>
                                    <button class="bg-xl-green text-white text-xs font-bold px-4 py-2 rounded-lg shadow-sm hover:bg-green-600 transition">View Plans</button>
                                </div>
                            </div>
                        </div>

                        <!-- Recommended Packages -->
                        <div>
                            <div class="flex justify-between items-center mb-3">
                                <h3 class="font-bold text-gray-800">For You</h3>
                                <span class="text-xl-light text-xs font-medium">View All</span>
                            </div>
                            <div class="space-y-3">
                                <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex justify-between items-center">
                                    <div class="flex gap-3 items-center">
                                        <div class="w-10 h-10 rounded-lg bg-orange-100 text-orange-600 flex items-center justify-center font-bold text-xs">50GB</div>
                                        <div>
                                            <h4 class="font-bold text-sm text-gray-800">Xtra Combo Flex M</h4>
                                            <p class="text-[10px] text-gray-400">30 Days • YouTube Unltd</p>
                                        </div>
                                    </div>
                                    <button onclick="triggerCTEvent('Package Purchased')" class="text-xl-blue font-bold text-sm bg-blue-50 px-3 py-1.5 rounded-lg hover:bg-blue-100">Rp 89k</button>
                                </div>
                                <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex justify-between items-center">
                                    <div class="flex gap-3 items-center">
                                        <div class="w-10 h-10 rounded-lg bg-purple-100 text-purple-600 flex items-center justify-center font-bold text-xs">PRIO</div>
                                        <div>
                                            <h4 class="font-bold text-sm text-gray-800">Prio Data Booster</h4>
                                            <p class="text-[10px] text-gray-400">7 Days • 5GB Main</p>
                                        </div>
                                    </div>
                                    <button onclick="triggerCTEvent('Package Purchased')" class="text-xl-blue font-bold text-sm bg-blue-50 px-3 py-1.5 rounded-lg hover:bg-blue-100">Rp 45k</button>
                                </div>
                            </div>
                        </div>

                        <!-- Banners slider simulation -->
                        <div class="overflow-x-auto whitespace-nowrap pb-2 no-scrollbar">
                            <div class="inline-block w-64 h-32 bg-gray-900 rounded-xl mr-3 relative overflow-hidden">
                                 <img src="netflix.png" class="absolute inset-0 w-full h-full object-cover opacity-60" alt="Stream">
                                 <div class="absolute bottom-3 left-3 text-white">
                                     <h4 class="font-bold text-sm">Stream On</h4>
                                     <p class="text-[10px]">Free Netflix with 100GB Plan</p>
                                 </div>
                            </div>
                            <div class="inline-block w-64 h-32 bg-gray-900 rounded-xl relative overflow-hidden">
                                <img src="wfh.png" class="absolute inset-0 w-full h-full object-cover opacity-60" alt="WFH">
                                <div class="absolute bottom-3 left-3 text-white">
                                    <h4 class="font-bold text-sm">Work From Home</h4>
                                    <p class="text-[10px]">Zoom & Teams unlimited data</p>
                                </div>
                           </div>
                        </div>
                    </div>
                </div>

                <!-- PAGE 2: CLEVERTAP DEMO CONTROLS -->
                <div id="pageDemo" class="hidden h-full bg-gray-50">
                    <div class="bg-white px-5 py-4 border-b border-gray-200 sticky top-0 z-10">
                        <h1 class="text-lg font-bold text-xl-blue">Solution Engineering</h1>
                        <p class="text-gray-500 text-xs">Demo Control Panel for XL Smart</p>
                    </div>
                    <div class="p-5 space-y-6">
                        <div class="bg-white rounded-xl p-4 shadow-sm border border-gray-100">
                            <div class="flex items-center justify-between mb-3">
                                <h3 class="font-bold text-gray-800 text-sm">Use Case: Upsell</h3>
                                <span class="text-[10px] bg-orange-100 text-orange-600 px-2 py-1 rounded font-bold">IN-APP</span>
                            </div>
                            <p class="text-xs text-gray-500 mb-4">Trigger a full screen interstitial for a limited time roaming offer.</p>
                            <button onclick="showInterstitial()" class="w-full py-2 bg-xl-blue text-white rounded-lg text-xs font-bold hover:bg-blue-900 transition">Trigger "Roaming Flash Sale"</button>
                        </div>
                        <div class="bg-white rounded-xl p-4 shadow-sm border border-gray-100">
                            <div class="flex items-center justify-between mb-3">
                                <h3 class="font-bold text-gray-800 text-sm">Use Case: Retention</h3>
                                <span class="text-[10px] bg-purple-100 text-purple-600 px-2 py-1 rounded font-bold">NATIVE</span>
                            </div>
                            <p class="text-xs text-gray-500 mb-4">Inject a "Business Upgrade" banner dynamically into the dashboard.</p>
                            <div class="flex items-center justify-between bg-gray-50 p-3 rounded-lg border border-gray-200">
                                <span class="text-xs font-semibold text-gray-600">Inject Native Banner</span>
                                <button onclick="toggleNativeDisplayAndSwitch()" class="w-10 h-5 bg-gray-300 rounded-full relative transition-colors duration-300" id="nativeToggleBtn">
                                    <span class="absolute left-1 top-1 w-3 h-3 bg-white rounded-full shadow-sm transition-transform duration-300" id="nativeToggleKnob"></span>
                                </button>
                            </div>
                        </div>
                        <div class="bg-white rounded-xl p-4 shadow-sm border border-gray-100">
                            <div class="flex items-center justify-between mb-3">
                                <h3 class="font-bold text-gray-800 text-sm">Use Case: Re-engagement</h3>
                                <span class="text-[10px] bg-red-100 text-red-600 px-2 py-1 rounded font-bold">PUSH</span>
                            </div>
                            <p class="text-xs text-gray-500 mb-4">Simulate a data expiry warning.</p>
                            <button onclick="showPushNotification()" class="w-full py-2 bg-white border border-xl-blue text-xl-blue rounded-lg text-xs font-bold hover:bg-blue-50 transition">Send "Low Data" Push</button>
                        </div>
                    </div>
                </div>

                <!-- PAGE 3: APP INBOX -->
                <div id="pageInbox" class="hidden h-full flex flex-col bg-white">
                     <div class="sticky top-0 bg-white z-10 px-5 py-4 border-b border-gray-100 flex items-center gap-4">
                        <button onclick="switchPage('pageHome')" class="text-gray-500"><i class="fas fa-arrow-left"></i></button>
                        <h1 class="text-lg font-bold text-gray-800">Notifications</h1>
                    </div>
                    <div class="divide-y divide-gray-100">
                        <div class="p-4 hover:bg-blue-50 transition cursor-pointer">
                            <div class="flex gap-3">
                                <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center text-green-600 shrink-0"><i class="fas fa-check"></i></div>
                                <div class="flex-1">
                                    <div class="flex justify-between mb-1">
                                        <h4 class="font-bold text-sm text-gray-900">Payment Successful</h4>
                                        <span class="text-[10px] text-gray-400">2m ago</span>
                                    </div>
                                    <p class="text-xs text-gray-600 line-clamp-2">Your payment of Rp 89.000 for Xtra Combo Flex M was successful.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bottom Navigation -->
            <div class="h-20 bg-white border-t border-gray-100 flex justify-around items-start pt-4 px-2 z-20">
                <button onclick="switchPage('pageHome')" class="flex flex-col items-center gap-1 w-16 group" id="navHome">
                    <i class="fas fa-home text-lg text-xl-blue transition-colors"></i>
                    <span class="text-[10px] font-medium text-xl-blue transition-colors">Home</span>
                </button>
                <button onclick="switchPage('pageDemo')" class="flex flex-col items-center gap-1 w-16 group" id="navDemo">
                    <i class="fas fa-sliders-h text-lg text-gray-400 group-hover:text-xl-blue transition-colors"></i>
                    <span class="text-[10px] font-medium text-gray-400 group-hover:text-xl-blue transition-colors">Capabilities</span>
                </button>
                <button class="flex flex-col items-center gap-1 w-16 group" id="navProfile">
                    <i class="fas fa-user text-lg text-gray-400 group-hover:text-xl-blue transition-colors"></i>
                    <span class="text-[10px] font-medium text-gray-400 group-hover:text-xl-blue transition-colors">Account</span>
                </button>
            </div>

            <!-- Safe Area Home Indicator -->
            <div class="absolute bottom-1 left-1/2 -translate-x-1/2 w-32 h-1 bg-gray-300 rounded-full z-30"></div>
        </div>

        <!-- OVERLAY: Interstitial Popup -->
        <div id="interstitialModal" class="absolute inset-0 z-50 bg-xl-blue/80 backdrop-blur-sm flex items-center justify-center hidden opacity-0 transition-opacity duration-300">
            <div class="bg-white w-[85%] rounded-3xl overflow-hidden shadow-2xl transform scale-90 transition-transform duration-300" id="interstitialContent">
                <div class="relative h-32 bg-[url('https://images.unsplash.com/photo-1436491865332-7a61a109cc05?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80')] bg-cover bg-center flex items-center justify-center">
                    <div class="absolute inset-0 bg-black/40"></div>
                    <button onclick="hideInterstitial()" class="absolute top-3 right-3 w-8 h-8 bg-black/20 hover:bg-black/40 text-white rounded-full flex items-center justify-center transition backdrop-blur-md"><i class="fas fa-times"></i></button>
                    <h2 class="relative text-2xl font-bold text-white tracking-wider uppercase drop-shadow-lg">Travel Ready?</h2>
                </div>
                <div class="p-6 text-center">
                    <span class="text-xs font-bold text-xl-blue bg-blue-50 px-3 py-1 rounded-full mb-3 inline-block">FLASH SALE</span>
                    <h3 class="text-lg font-bold text-gray-800 mb-2">50% OFF Roaming Pass</h3>
                    <p class="text-gray-500 text-xs mb-6">Traveling to Singapore? Get 7 Days Unlimited for Rp 50.000.</p>
                    <button onclick="hideInterstitial()" class="w-full bg-xl-green text-white py-3 rounded-xl font-bold shadow-lg shadow-green-100 active:scale-95 transition text-sm">Claim Offer</button>
                </div>
            </div>
        </div>

        <!-- OVERLAY: Bottom Sheet -->
        <div id="bottomSheet" class="absolute inset-0 z-40 bg-black/0 hidden flex flex-col justify-end transition-colors duration-300" onclick="if(event.target === this) hideBottomSheet()">
            <div class="bg-white w-full rounded-t-3xl p-6 shadow-[0_-10px_40px_rgba(0,0,0,0.1)] transform translate-y-full transition-transform duration-300" id="bottomSheetContent">
                <div class="w-12 h-1.5 bg-gray-200 rounded-full mx-auto mb-6"></div>
                <div class="flex gap-4 items-center mb-6">
                    <div class="w-12 h-12 bg-green-100 text-green-600 rounded-full flex items-center justify-center text-xl shrink-0"><i class="fas fa-check-circle"></i></div>
                    <div>
                        <h3 class="font-bold text-lg text-gray-900">Transaction Successful!</h3>
                        <p class="text-gray-500 text-xs mt-1">Package <span class="font-bold text-gray-700">Xtra Combo Flex M</span> is now active.</p>
                    </div>
                </div>
                <div class="flex gap-3">
                    <button onclick="hideBottomSheet()" class="flex-1 bg-gray-100 text-gray-700 py-3 rounded-xl font-bold text-xs">Close</button>
                    <button onclick="hideBottomSheet()" class="flex-1 bg-xl-blue text-white py-3 rounded-xl font-bold text-xs shadow-lg shadow-blue-200">View Usage</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast for Events -->
    <div id="eventToast" class="fixed bottom-10 left-1/2 -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-full shadow-xl opacity-0 transition-opacity duration-300 pointer-events-none z-50 text-sm font-medium flex items-center gap-2 w-max">
        <i class="fas fa-wifi text-green-400"></i>
        <span id="eventToastMsg">Event Recorded</span>
    </div>

    <script>
        function switchPage(pageId) {
            document.getElementById('pageHome').classList.add('hidden');
            document.getElementById('pageDemo').classList.add('hidden');
            document.getElementById('pageInbox').classList.add('hidden');
            
            const page = document.getElementById(pageId);
            page.classList.remove('hidden');
            page.classList.add('block');
            
            const navHome = document.getElementById('navHome');
            const navDemo = document.getElementById('navDemo');
            
            const resetNav = (el) => {
                el.querySelector('i').classList.replace('text-xl-blue', 'text-gray-400');
                el.querySelector('span').classList.replace('text-xl-blue', 'text-gray-400');
            };
            const activeNav = (el) => {
                el.querySelector('i').classList.replace('text-gray-400', 'text-xl-blue');
                el.querySelector('span').classList.replace('text-gray-400', 'text-xl-blue');
            };

            resetNav(navHome);
            resetNav(navDemo);

            if(pageId === 'pageHome') activeNav(navHome);
            if(pageId === 'pageDemo') activeNav(navDemo);
        }

        function showPushNotification() {
            const notif = document.getElementById('pushNotification');
            notif.classList.remove('-translate-y-[150%]');
            setTimeout(hideNotification, 4000);
        }

        function hideNotification() {
            document.getElementById('pushNotification').classList.add('-translate-y-[150%]');
        }

        function showInterstitial() {
            const modal = document.getElementById('interstitialModal');
            const content = document.getElementById('interstitialContent');
            modal.classList.remove('hidden');
            setTimeout(() => {
                modal.classList.remove('opacity-0');
                content.classList.replace('scale-90', 'scale-100');
            }, 10);
        }

        function hideInterstitial() {
            const modal = document.getElementById('interstitialModal');
            const content = document.getElementById('interstitialContent');
            modal.classList.add('opacity-0');
            content.classList.replace('scale-100', 'scale-90');
            setTimeout(() => modal.classList.add('hidden'), 300);
        }

        function showBottomSheet() {
            const sheet = document.getElementById('bottomSheet');
            const content = document.getElementById('bottomSheetContent');
            sheet.classList.remove('hidden');
            setTimeout(() => {
                sheet.classList.replace('bg-black/0', 'bg-black/50');
                content.classList.remove('translate-y-full');
            }, 10);
        }

        function hideBottomSheet() {
            const sheet = document.getElementById('bottomSheet');
            const content = document.getElementById('bottomSheetContent');
            sheet.classList.replace('bg-black/50', 'bg-black/0');
            content.classList.add('translate-y-full');
            setTimeout(() => sheet.classList.add('hidden'), 300);
        }

        let isNativeDisplayOn = false;
        function toggleNativeDisplay() {
            const display = document.getElementById('nativeDisplayContainer');
            const btn = document.getElementById('nativeToggleBtn');
            const knob = document.getElementById('nativeToggleKnob');
            isNativeDisplayOn = !isNativeDisplayOn;

            if (isNativeDisplayOn) {
                display.classList.remove('hidden');
                btn.classList.replace('bg-gray-300', 'bg-xl-green');
                knob.classList.add('translate-x-5');
            } else {
                display.classList.add('hidden');
                btn.classList.replace('bg-xl-green', 'bg-gray-300');
                knob.classList.remove('translate-x-5');
            }
        }

        function toggleNativeDisplayAndSwitch() {
            toggleNativeDisplay();
            if(isNativeDisplayOn) setTimeout(() => switchPage('pageHome'), 400);
        }

        function triggerCTEvent(eventName) {
            const toast = document.getElementById('eventToast');
            document.getElementById('eventToastMsg').innerText = `Recorded: ${eventName}`;
            toast.classList.remove('opacity-0');
            if (eventName === 'Package Purchased') showBottomSheet();
            setTimeout(() => toast.classList.add('opacity-0'), 3000);
        }
    </script>
</body>
</html>